<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>iOS Developer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Talk is cheap， show me the code. 用心创造美好未来">
<meta property="og:type" content="website">
<meta property="og:title" content="iOS Developer">
<meta property="og:url" content="http://yoursite.com/page/6/index.html">
<meta property="og:site_name" content="iOS Developer">
<meta property="og:description" content="Talk is cheap， show me the code. 用心创造美好未来">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="iOS Developer">
<meta name="twitter:description" content="Talk is cheap， show me the code. 用心创造美好未来">
  
    <link rel="alternate" href="/atom.xml" title="iOS Developer" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">iOS Developer</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">Hello World</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-系统原生请求表单上传" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/12/02/系统原生请求表单上传/" class="article-date">
  <time datetime="2016-12-02T03:05:10.000Z" itemprop="datePublished">2016-12-02</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/iOS/">iOS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/12/02/系统原生请求表单上传/">系统原生请求表单上传</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="创建NSMutableURLRequest请求"><a href="#创建NSMutableURLRequest请求" class="headerlink" title="创建NSMutableURLRequest请求"></a>创建NSMutableURLRequest请求</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div></pre></td><td class="code"><pre><div class="line">- (void)setRequest:(NSMutableURLRequest *)request</div><div class="line">&#123;</div><div class="line">    NSString *boundary = [NSString stringWithFormat:@&quot;Boundary+%08X%08X&quot;, arc4random(), arc4random()];</div><div class="line">    NSMutableData *body = [NSMutableData data];</div><div class="line">    </div><div class="line">    // 表单数据</div><div class="line">    NSMutableDictionary *param = [[NSMutableDictionary alloc] init];</div><div class="line">//    [param setValue:@&quot;254&quot; forKey:@&quot;empId&quot;];</div><div class="line">//    [param setValue:@&quot;18718&quot; forKey:@&quot;shopId&quot;];</div><div class="line"></div><div class="line">    </div><div class="line">    /** 遍历字典将字典中的键值对转换成请求格式:</div><div class="line">     --Boundary+72D4CD655314C423</div><div class="line">     Content-Disposition: form-data; name=&quot;empId&quot;</div><div class="line">     </div><div class="line">     254</div><div class="line">     --Boundary+72D4CD655314C423</div><div class="line">     Content-Disposition: form-data; name=&quot;shopId&quot;</div><div class="line">     </div><div class="line">     18718</div><div class="line">     */</div><div class="line">    [param enumerateKeysAndObjectsUsingBlock:^(id key, id obj, BOOL *stop) &#123;</div><div class="line">        NSMutableString *fieldStr = [NSMutableString string];</div><div class="line">        [fieldStr appendString:[NSString stringWithFormat:@&quot;--%@\r\n&quot;, boundary]];</div><div class="line">        [fieldStr appendString:[NSString stringWithFormat:@&quot;Content-Disposition: form-data; name=\&quot;%@\&quot;\r\n\r\n&quot;, key]];</div><div class="line">        [fieldStr appendString:[NSString stringWithFormat:@&quot;%@&quot;, obj]];</div><div class="line">        [body appendData:[fieldStr dataUsingEncoding:NSUTF8StringEncoding]];</div><div class="line">        [body appendData:[@&quot;\r\n&quot; dataUsingEncoding:NSUTF8StringEncoding]];</div><div class="line">    &#125;];</div><div class="line">    </div><div class="line">    </div><div class="line">    /// 图片数据部分</div><div class="line">    NSMutableString *topStr = [NSMutableString string];</div><div class="line">    NSString *path = [[NSBundle mainBundle] pathForResource:@&quot;001.jpeg&quot; ofType:nil];</div><div class="line">    NSData *data = [NSData dataWithContentsOfFile:path];</div><div class="line">    </div><div class="line">    /**拼装成格式：</div><div class="line">     --Boundary+72D4CD655314C423</div><div class="line">     Content-Disposition: form-data; name=&quot;uploadFile&quot;; filename=&quot;001.png&quot;</div><div class="line">     Content-Type:image/png</div><div class="line">     Content-Transfer-Encoding: binary</div><div class="line">     </div><div class="line">     ... contents of boris.png ...</div><div class="line">     */</div><div class="line">    [topStr appendString:[NSString stringWithFormat:@&quot;--%@\r\n&quot;, boundary]];</div><div class="line">    [topStr appendString:@&quot;Content-Disposition: form-data; name=\&quot;file\&quot;; filename=\&quot;001.png\&quot;\r\n&quot;];//⚠️注意：此处的『name=\&quot;file\&quot;』这个 file 就是你后端服务器定义的文件流的字段，特此提醒</div><div class="line">    [topStr appendString:@&quot;Content-Type:image/jpg\r\n&quot;];</div><div class="line">    [topStr appendString:@&quot;Content-Transfer-Encoding: binary\r\n\r\n&quot;];</div><div class="line">    [body appendData:[topStr dataUsingEncoding:NSUTF8StringEncoding]];</div><div class="line">    [body appendData:data];</div><div class="line">    [body appendData:[@&quot;\r\n&quot; dataUsingEncoding:NSUTF8StringEncoding]];</div><div class="line">    </div><div class="line">    // 结束部分</div><div class="line">    NSString *bottomStr = [NSString stringWithFormat:@&quot;--%@--&quot;, boundary];</div><div class="line">    /**拼装成格式：</div><div class="line">     --Boundary+72D4CD655314C423--</div><div class="line">     */</div><div class="line">    [body appendData:[bottomStr dataUsingEncoding:NSUTF8StringEncoding]];</div><div class="line">    </div><div class="line">    // 设置请求类型为post请求</div><div class="line">    request.HTTPMethod = @&quot;post&quot;;</div><div class="line">    // 设置request的请求体</div><div class="line">    request.HTTPBody = body;</div><div class="line">    // 设置头部数据，标明上传数据总大小，用于服务器接收校验</div><div class="line">    [request setValue:[NSString stringWithFormat:@&quot;%lu&quot;, (unsigned long)body.length] forHTTPHeaderField:@&quot;Content-Length&quot;];</div><div class="line">    // 设置头部数据，指定了http post请求的编码方式为multipart/form-data（上传文件必须用这个）。</div><div class="line">    [request setValue:[NSString stringWithFormat:@&quot;multipart/form-data; boundary=%@&quot;,boundary] forHTTPHeaderField:@&quot;Content-Type&quot;];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="上传文件流"><a href="#上传文件流" class="headerlink" title="上传文件流"></a>上传文件流</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">- (void)upload</div><div class="line">&#123;</div><div class="line">    //uploadModule - 1 im 2 app 3 other</div><div class="line">    //TODO:需要修改</div><div class="line">    NSString *urlStr = [NSString stringWithFormat:@&quot;http://qp.lianxi.com/file/upload?apiCode=%@&amp;uploadType=1&amp;uploadModule=2&amp;originalFlag=1&quot;,_share_apiCode];</div><div class="line">    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:urlStr] cachePolicy:0 timeoutInterval:30.0f];</div><div class="line">    </div><div class="line">    [self setRequest:request];</div><div class="line">    </div><div class="line">    NSLog(@&quot;开始上传...&quot;);</div><div class="line">    [NSURLConnection sendAsynchronousRequest:request queue:[[NSOperationQueue alloc] init] completionHandler:^(NSURLResponse *response, NSData *data, NSError *connectionError) &#123;</div><div class="line">        //这里就是服务器返回的图片地址</div><div class="line">        NSLog(@&quot;Result--%@&quot;, [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding]);</div><div class="line">        </div><div class="line">    &#125;];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h3><p><a href="http://www.jianshu.com/p/ac753689a48d" target="_blank" rel="external">原文地址</a></p>
<h3 id="我的"><a href="#我的" class="headerlink" title="我的"></a>我的</h3><p><a href="http://www.jianshu.com/users/b285639dd9fd/latest_articles" target="_blank" rel="external">我的简书</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/12/02/系统原生请求表单上传/" data-id="cj46tfgz4002mo3s6xl22mgkd" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/NSURLRequest/">NSURLRequest</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/表单上传/">表单上传</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Objective-C概述" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/11/30/Objective-C概述/" class="article-date">
  <time datetime="2016-11-30T02:43:20.000Z" itemprop="datePublished">2016-11-30</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/iOS/">iOS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/11/30/Objective-C概述/">Objective-C概述</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="Objective-C的起源"><a href="#Objective-C的起源" class="headerlink" title="Objective-C的起源"></a>Objective-C的起源</h3><blockquote>
<p>Objective-C与C++、Java、C#等面向对象的语言类似，不过很多方面有所差别。若是使用过一种面向对的开发语言，那么就能理解Objective-C所用的『范式和模板』了。然而，语法上会略显陌生，因为Objective-C使用的”消息结构”而非”函数调用”。Objective-C是由Smalltalk演化而来，后者是消息型语言的鼻祖。他们之间的调用看起来就是这样：</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">//Messaging （Objective-C）</div><div class="line">Object *obj = [Object new];</div><div class="line">[obj performWith:parameter1 and:parameter2];</div><div class="line"></div><div class="line">//Function calling (C++)</div><div class="line">Object *obj = [Object new];</div><div class="line">obj-&gt;perform(parameter1,parameter2);</div></pre></td></tr></table></figure>
<pre><code>关键的区别在于：使用消息结构的语言，其运行时所执行的代码是由运行时环境决定的；而使用函数调用的语言，则由编译器决定。如果上例代码中调用的函数是多态的，那么在运行时就要按照&quot;虚方法表&quot;(virture method table)来查出到底应该执行哪个函数实现。而采用消息结构的语言，不论是否多态，总是在运行时才会去查找所要执行的方法。

Notes：virture method table是编程语言为实现&quot;动态派发&quot;（dynamic dispatch）或 &quot;运行时方法绑定&quot;（runtime method binding） 而采用的一种机制。
</code></pre><blockquote>
<p>“对象”(object)的内存在堆(heap space)上;<br>“指针”(pointer)的内存在栈（stack）上。</p>
</blockquote>
<h4 id="在类的头文件中尽量少引入其他头文件"><a href="#在类的头文件中尽量少引入其他头文件" class="headerlink" title="在类的头文件中尽量少引入其他头文件"></a>在类的头文件中尽量少引入其他头文件</h4><pre><code>可以使用@class 关键字&quot;向前声明&quot;（forward declaring） 该类。引入过多的并不需要的头文件，会增加编译时间，还会导致循环引用。使用『向前声明』可以解决互相引用的问题，减少编译时间，而且还能降低彼此的依赖程度（即我们经常说的降低耦合性）
</code></pre><h4 id="多用字面量语法（literal-syntax），少用与之等价的方法"><a href="#多用字面量语法（literal-syntax），少用与之等价的方法" class="headerlink" title="多用字面量语法（literal syntax），少用与之等价的方法"></a>多用字面量语法（literal syntax），少用与之等价的方法</h4><h5 id="字面数值"><a href="#字面数值" class="headerlink" title="字面数值"></a>字面数值</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;!-- 字面数值 --&gt;</div><div class="line">NSNumber *someNumber = [NSNumber numberWithInt:1];</div><div class="line">等价于</div><div class="line">NSNumber *someNumber = @1;</div></pre></td></tr></table></figure>
<p> 字面量语法更加精简。能够以 NSNumber 实例表示的所有数据类型都可以使用这种表示方式。</p>
<h5 id="字面数组"><a href="#字面数组" class="headerlink" title="字面数组"></a>字面数组</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&lt;!-- 字面量数组 --&gt;</div><div class="line">	 NSArray *array = [NSArray arrayWithObjects:@&quot;Hello&quot;,@&quot;World&quot;,nil];</div><div class="line">	 等价于</div><div class="line">	 NSArray *array = [@&quot;Hello&quot;,@&quot;World&quot;];</div><div class="line"></div><div class="line">	 对应的使用方法：(取下标操作subscripting)</div><div class="line">	 NSString *animal = [array objectAtIndex:0];</div><div class="line">	 等价于</div><div class="line">	 NSString *animal = array[0];</div></pre></td></tr></table></figure>
<h5 id="字面字典"><a href="#字面字典" class="headerlink" title="字面字典"></a>字面字典</h5><p>“字典”是一种映射型数据结构，可向其中添加键值对。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&lt;!-- 字面量字典 --&gt;</div><div class="line">	 NSDictionary *dictionary = [NSDictionary dictionaryWithObjectsAndKeys:@&quot;Hello&quot;:@&quot;H&quot;,@&quot;World&quot;:@&quot;W&quot;,[NSNumber numberWithInt:28]:@&quot;A&quot;,nil];</div><div class="line">	 等价于</div><div class="line">	 NSDictionary *dictionary = @&#123;@&quot;H&quot;:@&quot;Hello&quot;,@&quot;W&quot;:@&quot;World&quot;,@&quot;A&quot;:@28&#125;;</div><div class="line">	</div><div class="line">	 对应的使用方法：</div><div class="line">	 NSString *animal = [dictionary  valueForKey:@&quot;H&quot;];</div><div class="line">	 等价于</div><div class="line">	 NSString *animal = dictionary[@&quot;H&quot;];</div></pre></td></tr></table></figure></p>
<pre><code>使用字面量语法的局限性：
1、除了字符串以外，创建出来的对象必须是 Foundation 框架下的才行。
2、定义了这些可行的子类话，则无法继续使用字面量语法创建对象。
3、使用字面量创建出来的字符串、数组、字典对象都是不可变的（immutable），若要可变，需要调用 mutableCopy。比如：NSMutableDictionary *mutable = [@{@&quot;H&quot;:@&quot;Hello&quot;,@&quot;W&quot;:@&quot;World&quot;,@&quot;A&quot;:@28} mutableCopy]

使用字面量语法的好处：
1、可以缩减代码的长度 使其更加易读
2、使用字面量语法更加安全
3、字面量语法实际上只是一种[&quot;语法糖&quot;syntactic sugar](http://zh.wikipedia.org/wiki/语法糖)
4、使用字面量语法创建数组或字典时，值中不能有 nil 对象，否则抛出异常。其实这样，更便于查错。纠错。
</code></pre><h4 id="多用类型常量，少用『-define』-预处理指令"><a href="#多用类型常量，少用『-define』-预处理指令" class="headerlink" title="多用类型常量，少用『#define』 预处理指令"></a>多用类型常量，少用『#define』 预处理指令</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">#define ANIMATION_DURATION 0.3 //没有类型信息</div><div class="line"></div><div class="line">与</div><div class="line"></div><div class="line">static const NSTimeInterval KAnimationDuration = 0.3; //包含类型信息</div><div class="line"></div><div class="line">//变量名已定要同时使用 const 和 static 来声明。</div><div class="line">//其实这些都是一些命名规范，后边细述。</div></pre></td></tr></table></figure>
<pre><code>有时候需要公开某个常量。比如，你可能会给代码块中某个 Event 发送通知（NSNotification）。派发通知时需要使用字符串来表示此项通知的名称，而这个名字就可以为一个外界可见的常值变量（constant variable）。这样的话，注册者无需知道实际字符串的值，只需要以常值变量来注册自己想要接收到的通知即可。此类常量需放在&quot;全局符号表&quot;（global symbol table）中，以便可以再定义该常量的编译单元之外使用。和上边的 static const 有所不同：
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">//In the header file</div><div class="line">extern NSString *const SCStringRefreshNotification; //常量指针</div><div class="line"></div><div class="line">//In the implementation file</div><div class="line">NSString *const SCStringRefreshNotification = @&quot;SCStringRefreshNotification&quot;;</div><div class="line"></div><div class="line">//点 h 文件声明，点 m 文件定义</div></pre></td></tr></table></figure>
<p>总之，不要使用预处理指令定义常量。这样定义出来的常量不仅不包含类型信息，而且有人修改了（或重新定义了）这个常量值编译器也不会产生警告⚠️信息。<br>​<br>在实现文件使用 static const 来定义”只在编译单元内可见的变量”(translation-unit-specific constant)。这类常量不会出现在全局符号表中，所以无需为其名称加前缀。</p>
<p>在头文件使用 extern 来声明全局常量，并在实现文件中定义其值。这类常量会出现在全局符号表中，所以通常用与之相关的类名做前缀。</p>
<h4 id="用枚举表示状态、选项、状态吗"><a href="#用枚举表示状态、选项、状态吗" class="headerlink" title="用枚举表示状态、选项、状态吗"></a>用枚举表示状态、选项、状态吗</h4><p>一个字节含8个二进制位，所以至多能表示可取256种（2^8个）枚举（编号为0~255）的枚举变量。</p>
<p>我们总习惯在 switch 语句中加上 default 分支。然而，若是用枚举来定义状态机（state machine），最好不要有 default 分支。这样的话，如果稍后新加上一个枚举状态，那么编译器会发出警告信息，提示新加入的状态并未在 switch 分支中处理。假如写上了 default 分支，那么他就会处理这个新状态，从而导致编译器不发警告信息。用 NS_ENUM 定义其他枚举类型时候也要注意此问题。</p>
<p>1、应该使用枚举来表示状态机的状态，传递给方法的选项以及状态码等值，给这些起个易懂的名字。<br>2、如果把传递给某个方法的选项表示为枚举类型，而多个选项又可同时使用，那么就将各选项值定义为2的幂，以便通过按位或操作将其组合起来。<br>3、用 NS_ENUM 和 NS_OPTIONS 宏来定义枚举类型，并指明其底层数据类型。这样的做就可以确保枚举是开发者所选择的底层数据类型实现出来，而不是采用编译器所选用的类型。<br>4、在处理枚举类型的 switch 语句中不要实现 default 分支。</p>
<h3 id="对象、消息、运行期"><a href="#对象、消息、运行期" class="headerlink" title="对象、消息、运行期"></a>对象、消息、运行期</h3><blockquote>
<p>用 Objective-C 等面向对象语言编程时，对象（object）就是”基本构造单元”(building block),开发者可以通过对象存储并传递数据。</p>
<p>在对象之间传递数据并执行任务的过程就叫做”消息传递”(Messaging)。</p>
</blockquote>
<p>Notes： 如果你熟悉了『对象』和『消息传递』这两个特性的工作原理，就可以写出高效且易维护的代码。</p>
<blockquote>
<p>当 App 运行起来后，为其提供相关支持的代码叫做”Objective-C运行期环境”（Objective-C runtime）.runtime提供了一些是的对象之间能够传递消息的重要函数。</p>
<p> 熟悉几个术语：存取方法（access method）、点语法（dot syntax）、编译器（compile time）、偏移量（offset）、硬编码（hardcode）、不兼容对象（incompatibility）、特殊变量（special variable）、类对象（class object）、应用程序二进制接口（Application Binary Interface，ABI）、稳固的（nonfragile）</p>
<p>在对象接口的定义中，可以使用属性，这是一种标准的写法，能够访问封装在对象的数据。因此，也可以把属性当做一种简称，其意思就是说：编译器会自动写出一套存取方法，用以访问给定类型中具有给定名称的变量。</p>
<p>使用点语法和直接调用存取方法之间没有丝毫差别。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">SCPerson *person= [SCPerson new];</div><div class="line">person.firstName = @&quot;CYH&quot;;</div><div class="line">Same As:</div><div class="line">[person setFirstName:@&quot;CYH&quot;];</div><div class="line"></div><div class="line">NSString *name = person.firstName;</div><div class="line">Same As:</div><div class="line">NSString *name = [person firstName];</div></pre></td></tr></table></figure>
<p> 属性拥有的特质分为四类：</p>
<h5 id="原子性："><a href="#原子性：" class="headerlink" title="原子性："></a>原子性：</h5><p> 在默认情况下，由编译器所合成的方法会通过锁定机制确保其原子性（atomicity）。如果属性具备 nonatomic特质，则不使用同步锁。请注意，如果某属性不具备 nonatomic特质那它就是原子的 atomic。</p>
<h5 id="读-写权限："><a href="#读-写权限：" class="headerlink" title="读/写权限："></a>读/写权限：</h5><blockquote>
<p>1、具备 readwrite 特质的属性拥有 getter 和 setter 方法。</p>
<p>2、具备 readonly 特质属性只有 getter 方法。</p>
</blockquote>
<h5 id="内存管理语义："><a href="#内存管理语义：" class="headerlink" title="内存管理语义："></a>内存管理语义：</h5><p> 属性用于封装数据，而数据必须要有”具体的所有权语义”（concrete ownership semantic）。</p>
<blockquote>
<p>assign: setter 方法只会执行针对”纯量类型”（scalar type,e.g:CGFloat和 NSInteger）的简单赋值操作</p>
<p>strong: 定义了一种拥有关系（ownership relationship）。为这种属性设置新值时，setter 方法会先保留新值，并释放旧值，然后再将新值设置上去。</p>
<p>weak: 定义了一种非拥有关系（nonowning relationship）。为这种属性设置新值时，setter 方法既不保留新值，也不释放旧值。此特质同 assign 类似，然而在属性特指的对象遭到摧毁时，属性值会清空（nil out）</p>
<p>unsafe_unretained:  此特质的语义和 assign 相同，但是它适用于对象类型（object type），该特质表达一种非拥有关系（不保留，unretained），当目标对象遭到摧毁时，属性值不会清空（不安全，unsafe），这一点与 weak 有区别。</p>
<p>copy: 此特质所述的关系和 strong 类似，然而设置方法并不保留新值，而是将其复制 （copy）。当熟悉类型是 NSString* 时候，经常用此特质来保护其封装性。因为传递给 setter 方法的新值有可能指向一个 NSMutableString 类的实例。这个类是 NSString 的子类，表示一种可以修改其值的字符串，此时若不拷贝字符串，那么设置完属性之后，字符串的值可能会在对象不知情的情况下遭人更改。所以，就要拷贝一份不可变的字符串，确保对象中的字符串不会无意简变动。只要实现属性所用的对象是可变的，就应该在设置新属性值时拷贝一份。</p>
</blockquote>
<h5 id="方法名："><a href="#方法名：" class="headerlink" title="方法名："></a>方法名：</h5><p>可以通过 getter=<name> 和 setter=<name> 指定存取方法的方法名</name></name></p>
<p>注释：不应该在 init （或 dealloc） 方法中调用存取方法。</p>
<h4 id="在对象内部尽量直接访问实例变量"><a href="#在对象内部尽量直接访问实例变量" class="headerlink" title="在对象内部尽量直接访问实例变量"></a>在对象内部尽量直接访问实例变量</h4><p>1、在对象内部读取数据时，应该直接通过实例变量来读，而写入数据时，则应该通过属性来写<br>2、在初始化方法及 dealloc 方法中，总是应该直接通过实例变量来读写数据<br>3、有时会使用惰性初始化技术配置某分数据，这种情况下，需要通过属性来读取数据。</p>
<h4 id="理解”对象等同性”这一概念"><a href="#理解”对象等同性”这一概念" class="headerlink" title="理解”对象等同性”这一概念"></a>理解”对象等同性”这一概念</h4><blockquote>
<p>根据”等同性”(equality)来比较对象是一个非常有用的功能。不过，按照==操作符比较出来的结果未必是我们想要的，因为该操作比较的是两个指针本身，而不是其所指的对象。应该使用NSObject协议中声明的”isEqual:”方法来判断两个对象的等同性。一般来说，两个类型不同的对象总是不相等的(unequal)。某些对象提供了特殊的”等同性判定方法”(equality-checking method),如果已经知道两个受测对象都属干同一个类，那么就可以使用这种方法。以下述代码为例： </p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">NSString *foo = @&quot;Badge:23&quot;; </div><div class="line">NSString *bar = [NSString stringWithFormat: @&quot;Badge:%i&quot;, 123]; </div><div class="line">BOOL equalA = (foo == bar); //&lt; equalA = NO </div><div class="line">BOOL equalB = [foo isEqual:bar]; //&lt; equalB = YES </div><div class="line">BOOL equalC = [foo isEqualToString:bar]; //&lt; equalC = YES</div></pre></td></tr></table></figure>
<blockquote>
<p>大家可以看到==与等同性判断方法之间的差别。NSString类实现了一个自己独有的同性判断方法，名叫” isEqualToString:”。传递给该方法的对象必须是NSString， 否则结果未定义(undefined).调用该方法比调用”isEqual:”方法快，后者还要执行额外的步骤，因为他不知道受测对象的类型。</p>
</blockquote>
<p>NSObject协议中有两个用于判断等同性的关键方法：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">- (BOOL)isEqual:(id)object; </div><div class="line">- (NSUInteger)hash;</div></pre></td></tr></table></figure></p>
<blockquote>
<p>NSObject类对这两个方法的默认实现是：当且仅当其”指针值” (pointer value)完全相等时，这两个对象才相等。若想在自定义的对象中正确覆写这些方法，就必须先理解其约定(contract)。 如果 “ isEqual:” 方法判定两个对象相等，那么其hash方法也必须返回同一个值。但是，如果两个对象的hash方法返回同一个值，那么”isEqual:”方法未必会认为两者相等。<br>比如有下面这个类：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">@interface SCPerson : NSObject </div><div class="line">@property (nonatomic, copy) NSString *firstName; </div><div class="line">@property (nonatomic, copy) NSString *lastName; </div><div class="line">@property (nonatomic, assign) NSUInteger age; </div><div class="line">@ end</div></pre></td></tr></table></figure></p>
</blockquote>
<p>我们认为，如果两个SCPerson的所有字段均相等，那么这西个对象就相等。于是<br>isEqual:”方法可以写成：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">- (Bool） isEqual: (id) object &#123;</div><div class="line">//指针类型的比较</div><div class="line">if (self == object) return YES;  </div><div class="line">if ([self class] != [object class]) return NO;</div><div class="line"></div><div class="line">//对象类型的比较</div><div class="line">SCPerson *otherPerson = (SCPerson*)object; </div><div class="line">if (![ firstName isEqualToString:otherPerson.firstName]) return NO; </div><div class="line">if (![_lastName isEqualToString:otherPerson.lastName]) return NO; </div><div class="line">if (_age != otherPerson.age) return NO; </div><div class="line">return YES; </div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<blockquote>
<p>首先，直接判断两个指针是否相等。若相等，则其均指向同一对象，所以受测的对象也必定相等。接下来，比较西对象所属的类。若不属于同一个类，则两对象不相等。SCPerson对象当然不可能与SCDog对象相等。不过，有时我们可能认为：一个SCPerson实例可以与其子类（比如SCFanBingBingPerson)实例相等。在继承体系（inheritance hierarchy)中判断等同性时，经常遭遇此类问题。所以实现” isEqual:”方法时要考虑到这种情况.最后，检测每个属性是否相等。只要其中有不相等的属性，就判定两对象不等，否则两对象相等。</p>
<p>Hash 方法，根据等同性约定：若两对象相等，则其哈希码也相等，但是两个哈希码相同的对象却未必相等。这也是能否正确重写”isEqual:”方法的关键所在。编写 hash 方法时，应该用当前对象做做实验，以便在减少碰撞频度与降低运算复杂程度之间取舍。</p>
</blockquote>
<p>特定类具有特定的等同性判定方法：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">NSString 			isEqualToString:</div><div class="line">NSArray 			isEqualToArray:</div><div class="line">NSDictionary 		isEqualToDictionary:</div></pre></td></tr></table></figure></p>
<p>常用的还有NSURL类的对比方法：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">- (BOOL)isEqualToURL:(NSURL *)aURL</div><div class="line">  &#123;</div><div class="line">    if ([self isEqual:aURL]) return YES;</div><div class="line">    if ([[self scheme] caseInsensitiveCompare:[aURL scheme]] != NSOrderedSame) return NO;</div><div class="line">    if ([[self host] caseInsensitiveCompare:[aURL host]] != NSOrderedSame) return NO;</div><div class="line"></div><div class="line">    // NSURL path is smart about trimming trailing slashes</div><div class="line">    // note case-sensitivty here</div><div class="line">    if ([[self path] compare:[aURL path]] != NSOrderedSame) return NO;</div><div class="line"></div><div class="line">    // at this point, we&apos;ve established that the urls are equivalent according to the rfc</div><div class="line">    // insofar as scheme, host, and paths match</div><div class="line"></div><div class="line">    // according to rfc2616, port&apos;s can weakly match if one is missing and the</div><div class="line">    // other is default for the scheme, but for now, let&apos;s insist on an explicit match</div><div class="line">    if ([[self port] compare:[aURL port]] != NSOrderedSame) return NO;</div><div class="line"></div><div class="line">    if ([[self query] compare:[aURL query]] != NSOrderedSame) return NO;</div><div class="line"></div><div class="line">    // for things like user/pw, fragment, etc., seems sensible to be</div><div class="line">    // permissive about these.  (plus, I&apos;m tired :-))</div><div class="line">    return YES;</div><div class="line">  &#125;</div></pre></td></tr></table></figure></p>
<p>警告⚠️:由于 Objective-C在编译期不做强类型检查（strong type checking）,这样容易不小心传入类型错误的对象，因此开发者应该保证所传对象的类型是正确的。</p>
<p>在编写判定方法时，应该一并 override “isEqual:”方法，目的是：如果受测类型的参数与接收该消息的对象属于同一个类，那么就调用自己写的判定方法，否则就交给超类判断。</p>
<p>创建等同性判定方法时，需要决定是根据整个对象来判定等同性，还是仅根据其中几个字段来判断。</p>
<p>用一个 NSMutableSet 与几个 NSMutableArray 对象测试一下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">先把一个数组加入set中： </div><div class="line">NSMutableSet *set = [NSMutableSet new]; </div><div class="line">NSMutableArray *arrayA = [@[@1, @2] mutableCopy]; </div><div class="line">[set addObject:arrayA]; </div><div class="line">NSLog(@&quot;set = %@&quot;, set); </div><div class="line">// Output: set = &#123;((1,2))&#125;</div></pre></td></tr></table></figure></p>
<p>现在set里含有一个数组对象，数组中包含两个对象。再向set中加入一个数组，此数结<br>与前一个数组所含的对象相同，顺序也相同，于是，待加入的数组与set中已有的数组是相<br>等的：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">NSMutableArray *arrayB = [@[@1, @2] mutableCopy]; </div><div class="line">[set addObject:arrayB];</div><div class="line">NSLog(@&quot;set = %@&quot;, set); </div><div class="line">// Output: set = &#123;((1,2))&#125;</div></pre></td></tr></table></figure></p>
<p>此时set里仍然只有一个对象：因为刚才要加人的那个数组对象和set中已有的数组对象相等，所以set并不会改变。这次我们来添加一个和set中已有对象不同的数组：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">NSMutableArray *arrayC = [@[@1] mutableCopy]; </div><div class="line">[set addObject:arrayC]; </div><div class="line">NSLog(@&quot;set = %@&quot;, set); </div><div class="line">// Output: set = &#123;((1), (1,2)&#125; </div><div class="line"></div><div class="line">正如大家所料，由于arayC与set里已有的对象不相等，所以现在set里有两个数组了:其中一个是最早加入的，另一个是刚才新添加的。最后，我们改变arrayC的内容，令其和最早加入set的那个数组相等： </div><div class="line">[arrayC add0bject:@2]; </div><div class="line">NSLog((@&quot;set = %@&quot;, set); </div><div class="line">// Output: set = &#123;((1, 2) , (1, 2)&#125; </div><div class="line">set中居然可以泡含两个彼此相等的数组！根据set的语义是不允许出现这种情况的，然而现在却无法保证这一点了， 因为我们修改了 set中已有的对象。若是拷贝此set，那就更糟糕了 : </div><div class="line">NSSet *setB = [set copy]; </div><div class="line">NSLog(@&quot;setB = %@&quot;, setB)；</div><div class="line">// Output: setB = &#123;((1,2))&#125;</div></pre></td></tr></table></figure></p>
<p>把某对象放入 set 之后，就不要在修改该对象的内容了，如果非要改变就要注意其存在的隐患，并使用相应的应对方法处理可能发生的问题。</p>
<h4 id="以类簇模式隐藏实现细节"><a href="#以类簇模式隐藏实现细节" class="headerlink" title="以类簇模式隐藏实现细节"></a>以类簇模式隐藏实现细节</h4><p>创建类簇：（工厂模式（Factory pattern）是创建类簇的方法之一）<br>定义抽象基类，每个”实体子类”(concrete subclass)都从基类继承而来；</p>
<h4 id="在既有类中使用关联对象存放自定义数据"><a href="#在既有类中使用关联对象存放自定义数据" class="headerlink" title="在既有类中使用关联对象存放自定义数据"></a>在既有类中使用关联对象存放自定义数据</h4><p> 所谓关联对象（Associated Object），就是给某些对象关联许多其他对象，这些对象通过”键”来区分。存储对象值得时候，可以指明”存储策略”(storage policy),用以维护相应的”内存管理语义”。</p>
<table>
<thead>
<tr>
<th style="text-align:center">关联类型</th>
<th style="text-align:center">等效的@property属性</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">OBJC_ASSOCIATION_ASSIGN</td>
<td style="text-align:center">assign</td>
</tr>
<tr>
<td style="text-align:center">OBJC_ASSOCIATION_RETAIN_NONATOMIC</td>
<td style="text-align:center">nonatomic,retain</td>
</tr>
<tr>
<td style="text-align:center">OBJC_ASSOCIATION_COPY_NONATOMIC</td>
<td style="text-align:center">nonatomic,copy</td>
</tr>
<tr>
<td style="text-align:center">OBJC_ASSOCIATION_RETAIN</td>
<td style="text-align:center">retain</td>
</tr>
<tr>
<td style="text-align:center">OBJC_ASSOCIATION_COPY</td>
<td style="text-align:center">copy</td>
</tr>
</tbody>
</table>
<p>下列方法可以管理关联对象：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">void objc_setAssociatedObject(id object,void *key,id value,objc_AssociationPolicy policy)</div></pre></td></tr></table></figure>
<p>此方法以给指定的键和策略为某对象设置关联对象值。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">id objc_getAssociatedObject(id object,void *key)</div></pre></td></tr></table></figure>
<p>此方法根据指定的键从某对象中获取对应的关联对象值。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">void objc_removeAssociatedObjects(id object)</div></pre></td></tr></table></figure>
<p>此方法移除指定对象的全部关联对象。</p>
<p>​    我们可以把某对象想象成 NSDictionary，把关联到该对象的值理解为字典中的条目，于是，存取关联对象的值就相当于在 NSDictionary 对象上调用[object setObejct:value forKey:key] 与[object valueForKey:key]方法。然而，两者之间有个重要的差别：设置关联对象时用的键（key）是一个<a href="http://en.wikipedia.org/wiki/Opaque_pointer" target="_blank" rel="external">“不透明的指针”(opaque pointer)</a>。 如果在两个键上调用” isEqual:”方法返回的是 YES，那么 NSDictionary 就认为二者相等；然而在设置关联对象的值时，若想令两个键匹配到同一个值，则二者必须是完全相同的指针才行。<strong>鉴于此，在设置关联对象的值时，通常使用静态的全局变量做键（key）。</strong></p>
<p><img src="https://ww4.sinaimg.cn/large/006tNc79jw1fb7yh6bdppj31kw1cuwhm.jpg" alt=""></p>
<p><a href="http://blog.chaiyahang.com/2016/12/27/Objective-C概述（二）/" target="_blank" rel="external">Objective-C概述（二）</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/11/30/Objective-C概述/" data-id="cj46tfgxg000vo3s6wak3pkho" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Objective-C/">Objective-C</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-忆南工" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/11/23/忆南工/" class="article-date">
  <time datetime="2016-11-23T01:47:08.000Z" itemprop="datePublished">2016-11-23</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/文字/">文字</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/11/23/忆南工/">忆南工</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="忆南工"><a href="#忆南工" class="headerlink" title="忆南工"></a>忆南工</h2><p>　　能记起刚来南工的时候，香樟林里的香樟轻轻地摇着叶子，如今，校园里已是满地的枫叶和银杏叶，风很大，但人心却很暖。</p>
<p>　　昔我往矣，杨柳依依，今我来思，雨雪霏霏。</p>
<p>　　雪使我们感受到生命的美丽和短暂，使我们感到尽管存在敌意，可是人与人之间是非常相似的，还使我们感到时空的广阔和人世的狭窄。所以雪下得越大，人与人之间的距离越小，它似乎盖住了敌意、急躁和愤怒，使人与人之间更加接近。</p>
<p>　　苍茫白雪间，群屋静立。即使正在下着雪，我们也要在我们的路上。不管过程和结果，看看陌生人群和风景，俘获一颗能装下喜欢雪的心，初雪，只有你最美。</p>
<p>　　愿初雪不渡我，恋者有来生。</p>
<h3 id="查看原文，请点击-原文链接-南工"><a href="#查看原文，请点击-原文链接-南工" class="headerlink" title="查看原文，请点击 原文链接@南工"></a>查看原文，请点击 <a href="http://mp.weixin.qq.com/s?__biz=MjM5MjkzNDEwOQ==&amp;mid=2651308609&amp;idx=1&amp;sn=a903ab6e19384ff8fd60cb134011fa56&amp;chksm=bd6dd3f38a1a5ae52a2a510d42d82cd50c5cc3025fff6a02b094469622a8092fabfcc456fea0&amp;scene=0#rd" target="_blank" rel="external">原文链接@南工</a></h3>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/11/23/忆南工/" data-id="cj46tfgyo001zo3s68i5j2laa" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/不甘示弱/">不甘示弱</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/南工/">南工</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/我的母校/">我的母校</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/梦溪湖/">梦溪湖</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/认真的雪/">认真的雪</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-TouchID-的集成开发说明" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/11/21/TouchID-的集成开发说明/" class="article-date">
  <time datetime="2016-11-21T06:08:42.000Z" itemprop="datePublished">2016-11-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/iOS/">iOS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/11/21/TouchID-的集成开发说明/">TouchID 的集成开发说明</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="说明："><a href="#说明：" class="headerlink" title="说明："></a>说明：</h2><pre><code>TouchID 指纹识别是iPhone 5s设备新增的一项重大功能，用于数据加密和安全。而在iOS8.0 以后也向第三方开放了相应功能API，我们可以利用这个API做相应的用户验证和登录的功能，省去输入密码的环节，提高登录的用户体验。
</code></pre><h2 id="TouchID-API官方文档"><a href="#TouchID-API官方文档" class="headerlink" title="TouchID API官方文档:"></a>TouchID API官方文档:</h2><h3 id="API官方文档"><a href="#API官方文档" class="headerlink" title="API官方文档"></a><a href="https://developer.apple.com/library/ios/documentation/LocalAuthentication/Reference/LAContext_Class/index.html" target="_blank" rel="external">API官方文档</a></h3><h2 id="仅在-iOS-8-0-之后支持"><a href="#仅在-iOS-8-0-之后支持" class="headerlink" title="仅在 iOS 8.0 之后支持"></a>仅在 iOS 8.0 之后支持</h2> <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">canEvaluatePolicy:监测设备是否支持TouchID，返回BOOL，并且若不支持，则在NSError里面返回相应状态</div><div class="line">evaluatePolicy:TouchID验证状态，在Block里面返回验证状态BOOL和NSError</div><div class="line">iOS 9.0以后，有更加严密的 TouchID 认证流程，方法如下：</div><div class="line">- (void)evaluateAccessControl:(SecAccessControlRef)accessControl</div><div class="line">                    operation:(LAAccessControlOperation)operation</div><div class="line">              localizedReason:(NSString *)localizedReason</div><div class="line">                        reply:(void(^)(BOOL success, NSError * __nullable error))reply</div><div class="line">NS_AVAILABLE(10_11, 9_0) __WATCHOS_AVAILABLE(3.0) __TVOS_UNAVAILABLE;</div></pre></td></tr></table></figure>
<h2 id="逻辑流程设计："><a href="#逻辑流程设计：" class="headerlink" title="逻辑流程设计："></a>逻辑流程设计：</h2><pre><code>在设备第一次使用指纹登录之前，必须先登录原有的账号（app注册账号），进行设备（用户）绑定。
</code></pre><p> 绑定TouchID举例说明：<br> 1、开启指纹验证：在app登录后，比如：在“用户信息－安全”，点击开启“指纹登录”；<br> 2、验证TouchID：检测当前设备是否支持TouchID，若支持则发起TouchID验证；<br> 3、把账号/密码写入 KeyChain：TouchID验证通过后，根据当前已登录的账号和硬件设备Token，生成设备账号/密码（规则可自定，密码要长要复杂），并保存在keychain；<br> 4、绑定：生成设备账号/密码后，将原账号及设备账号/密码，加密后发送到服务端进行绑定；<br> 5、成功：验证原账号及设备账号有效后，返回相应状态，绑定成功则完成整个TouchID（设备）绑定流程。</p>
<p> 使用已经绑定的TouchID登录：<br>    在设备（用户）绑定之后，并且用户账号退出后，可以使用指纹登录，若当前设备未绑定，则不会出现“指纹登录”<br> 按钮。</p>
<h3 id="流程说明："><a href="#流程说明：" class="headerlink" title="流程说明："></a>流程说明：</h3><p> 1、TouchID登录：绑定成功后，在用户登录界面，点击“指纹登录”；<br> 2、验证TouchID：检测当前设备是否支持TouchID，若支持则发起TouchID验证；<br> 3、验证登录：从 keychain 读取app在本机存储的设备账号/密码，调用 app 登录接口，发起登录请求；<br> 4、成功：验证设备账号/密码后，返回相应状态，登录成功则完成整个TouchID登录流程。</p>
<p> 需要导入LocalAuthentication.framework</p>
<p> 特别注意：在使用的过程中，看清属性是在 iOS XX_0 几之后才支持才允许使用的，很多属性和特性都是随着机型的迭代而新增的；使用不当会崩溃哟。用TouchID进行验证登录，尤其涉及到安全和隐私问题，这方面，我们尤其要重视！！！</p>
<h3 id="几步关键性操作示例如下："><a href="#几步关键性操作示例如下：" class="headerlink" title="几步关键性操作示例如下："></a>几步关键性操作示例如下：</h3><h4 id="验证本机是否支持-TouchID"><a href="#验证本机是否支持-TouchID" class="headerlink" title="验证本机是否支持 TouchID"></a>验证本机是否支持 TouchID</h4> <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">- (BOOL)isSupportTouchID</div><div class="line">&#123;</div><div class="line">    //首先使用canEvaluatePolicy 判断设备支持状态</div><div class="line">    <span class="keyword">if</span> ([self.context canEvaluatePolicy:LAPolicyDeviceOwnerAuthenticationWithBiometrics error:nil]) &#123;</div><div class="line">        <span class="built_in">return</span> YES;</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">return</span> NO;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="支持-则将密码与-TouchID-进行绑定，并将密码写入-keychain"><a href="#支持-则将密码与-TouchID-进行绑定，并将密码写入-keychain" class="headerlink" title="支持,则将密码与 TouchID 进行绑定，并将密码写入 keychain."></a>支持,则将密码与 TouchID 进行绑定，并将密码写入 keychain.</h4><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">- (<span class="keyword">void</span>)contextBindingTouchIDWithBindString:(<span class="built_in">NSString</span> *)bindString</div><div class="line">                                     policy:(LAPolicy)policy</div><div class="line">                                   complete:(LXBindingInfoCompleteBlock)complete</div><div class="line">&#123;</div><div class="line">    <span class="keyword">if</span> (![<span class="keyword">self</span> isSupportTouchID]) &#123;</div><div class="line">        complete(<span class="literal">NO</span>,<span class="literal">nil</span>,<span class="string">@"设备不支持 TouchID"</span>);</div><div class="line">        <span class="keyword">return</span>;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="built_in">CFErrorRef</span> error = <span class="literal">NULL</span>;</div><div class="line">    </div><div class="line">    <span class="comment">// Should be the secret invalidated when passcode is removed? If not then use kSecAttrAccessibleWhenUnlocked</span></div><div class="line">    SecAccessControlRef sacObject = SecAccessControlCreateWithFlags(kCFAllocatorDefault,</div><div class="line">                                                                    kSecAttrAccessibleWhenPasscodeSetThisDeviceOnly,</div><div class="line">                                                                    kSecAccessControlTouchIDAny, &amp;error);</div><div class="line">    <span class="keyword">if</span> (sacObject == <span class="literal">NULL</span> || error != <span class="literal">NULL</span>) &#123;</div><div class="line">        <span class="built_in">NSString</span> *errorString = [<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"SecItemAdd can't create sacObject: %@"</span>, error];</div><div class="line">        <span class="built_in">NSLog</span>(<span class="string">@"errorString : %@"</span>,errorString);</div><div class="line">        complete(<span class="literal">NO</span>,(__bridge <span class="built_in">NSError</span> *)(error),errorString);</div><div class="line">        <span class="keyword">return</span>;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="comment">//默认iOS8.0的验证方式，验证通过，再绑定</span></div><div class="line">    <span class="comment">/*</span></div><div class="line">     LAPolicyDeviceOwnerAuthenticationWithBiometrics NS_ENUM_AVAILABLE(NA, 8_0)</div><div class="line">     LAPolicyDeviceOwnerAuthentication               NS_ENUM_AVAILABLE(10_11, 9_0)</div><div class="line">     */</div><div class="line">    [<span class="keyword">self</span> fingerprintAuthenticationPolicy:policy localizedFallbackTitle:<span class="string">@""</span> complete:^(<span class="built_in">BOOL</span> isSuccess, <span class="built_in">NSError</span> *error, LXLAError errorCode, <span class="built_in">NSString</span> *errorReason) &#123;</div><div class="line">        </div><div class="line">        <span class="built_in">dispatch_async</span>(dispatch_get_main_queue(), ^&#123;</div><div class="line">            <span class="keyword">if</span> (isSuccess) &#123;</div><div class="line">                <span class="comment">/*</span></div><div class="line">                 We want the operation to fail if there is an item which needs authentication so we will use</div><div class="line">                 `kSecUseNoAuthenticationUI`.</div><div class="line">                 */</div><div class="line">                <span class="built_in">NSData</span> *secretTextData = [bindString dataUsingEncoding:<span class="built_in">NSUTF8StringEncoding</span>];</div><div class="line">                <span class="built_in">NSDictionary</span> *attributes = @&#123;</div><div class="line">                                             (<span class="keyword">id</span>)kSecClass: (<span class="keyword">id</span>)kSecClassGenericPassword,</div><div class="line">                                             (<span class="keyword">id</span>)kSecAttrService: [SCAppMonitor appName],</div><div class="line">                                             (<span class="keyword">id</span>)kSecValueData: secretTextData,</div><div class="line">                                             (<span class="keyword">id</span>)kSecUseAuthenticationUI: (<span class="keyword">id</span>)kSecUseAuthenticationUIAllow,</div><div class="line">                                             (<span class="keyword">id</span>)kSecAttrAccessControl: (__bridge_transfer <span class="keyword">id</span>)sacObject</div><div class="line">                                             &#125;;</div><div class="line">                </div><div class="line">                OSStatus status =  SecItemAdd((__bridge <span class="built_in">CFDictionaryRef</span>)attributes, <span class="literal">nil</span>);</div><div class="line">                </div><div class="line">                <span class="built_in">NSString</span> *message = [<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"SecItemAdd status: %@"</span>, [<span class="keyword">self</span> keychainErrorToString:status]];</div><div class="line">                <span class="built_in">NSLog</span>(<span class="string">@"message : %@"</span>,message);</div><div class="line">                complete(<span class="literal">YES</span>,<span class="literal">nil</span>,<span class="string">@"指纹验证成功"</span>);</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">else</span>&#123;</div><div class="line">                complete(<span class="literal">NO</span>,<span class="literal">nil</span>,<span class="string">@"指纹验证失败"</span>);</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">    &#125;];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="从-keychain-中查询与-TouchID-绑定的密码。"><a href="#从-keychain-中查询与-TouchID-绑定的密码。" class="headerlink" title="从 keychain 中查询与 TouchID 绑定的密码。"></a>从 keychain 中查询与 TouchID 绑定的密码。</h4><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">- (<span class="keyword">void</span>)queryInfoFromKeyChain:(LXQueryBindInfoCompleteBlock)complete&#123;</div><div class="line">    <span class="built_in">NSDictionary</span> *query = @&#123;</div><div class="line">                            (<span class="keyword">id</span>)kSecClass: (<span class="keyword">id</span>)kSecClassGenericPassword,</div><div class="line">                            (<span class="keyword">id</span>)kSecAttrService: [SCAppMonitor appName],</div><div class="line">                            (<span class="keyword">id</span>)kSecReturnData: @YES,</div><div class="line">                            (<span class="keyword">id</span>)kSecUseOperationPrompt: <span class="string">@"Authenticate to access service password"</span>,</div><div class="line">                            &#125;;</div><div class="line"></div><div class="line">    <span class="built_in">dispatch_async</span>(dispatch_get_main_queue(), ^&#123;</div><div class="line">        <span class="built_in">NSString</span> *message;</div><div class="line">        <span class="built_in">CFTypeRef</span> dataTypeRef = <span class="literal">NULL</span>;</div><div class="line"></div><div class="line">        OSStatus status = SecItemCopyMatching((__bridge <span class="built_in">CFDictionaryRef</span>)(query), &amp;dataTypeRef);</div><div class="line">        <span class="keyword">if</span> (status == errSecSuccess) &#123;</div><div class="line">            <span class="built_in">NSData</span> *resultData = (__bridge_transfer <span class="built_in">NSData</span> *)dataTypeRef;</div><div class="line">            message = [[<span class="built_in">NSString</span> alloc] initWithData:resultData encoding:<span class="built_in">NSUTF8StringEncoding</span>];</div><div class="line">            complete(<span class="literal">YES</span>,message,<span class="literal">nil</span>);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">else</span> &#123;</div><div class="line">            message = [<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"SecItemCopyMatching status: %@"</span>, [<span class="keyword">self</span> keychainErrorToString:status]];</div><div class="line">            complete(<span class="literal">NO</span>,<span class="literal">nil</span>,<span class="string">@"指纹验证失败"</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><a href="http://baike.so.com/doc/6246764-6460171.html" target="_blank" rel="external">指纹识别概念阐述</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/11/21/TouchID-的集成开发说明/" data-id="cj46tfgxi000xo3s6vyodqgmc" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Authentication/">Authentication</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/TouchID/">TouchID</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-站在岁月之巅放牧心灵" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/11/18/站在岁月之巅放牧心灵/" class="article-date">
  <time datetime="2016-11-18T03:04:36.000Z" itemprop="datePublished">2016-11-18</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/文字/">文字</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/11/18/站在岁月之巅放牧心灵/">站在岁月之巅放牧心灵</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>　　生命，是一树花开，<br>　　或安静或热烈，或寂寞或璀璨。<br>　　—<br>　　日子，在岁月的年轮中渐次厚重，那些天真的、跃动的、抑或沉思的灵魂，在繁华与喧嚣中，被刻上深深浅浅、或浓或淡的印痕。<br>　　很欣赏这样一句话：生命，是一场虚妄。其实，经年过往，每个人何尝不是在这场虚妄里跋涉?在真实的笑里哭着，在真实的哭里笑着，一笺烟雨，半帘幽梦，许多时候，我们不得不承认：生活，不是不寂寞，只是不想说。<br>　　于无声处倾听凡尘落素，渐渐明白：人生，总会有许多无奈，希望、失望、憧憬、彷徨，苦过了，才知甜蜜;痛过了，才懂坚强;傻过了，才会成长。生命中，总有一些令人唏嘘的空白，有些人，让你牵挂，却不能相守;有些东西，让你羡慕，却不能拥有;有些错过，让你留恋，却终生遗憾。<br>　　在这喧闹的凡尘，我们需要有适合自己的地方，用来安放灵魂。也许，是一座安静宅院;也许，是一本无字经书;也许，是一条迷津小路。只要是自己心之所往，便是驿站，为了将来起程时，不再那么迷惘。<br>　　红尘三千丈，念在山水间。生活，不总是一帆风顺。因为爱，所以放手;因为放手，所以沉默;因为一份懂得，所以安心着一个回眸。也许，有风有雨的日子，才承载了生命的厚重;风轻云淡的日子，更适于静静领悟。<br>　　深深懂得：这世界上，并不是所有的东西都符合想象。有些时候，山是水的故事，云是风的故事;有些时候，星不是夜的故事，情不是爱的故事。生命的旅途中，许多人走着、走着，就散了;许多事看着、看着，就淡了;许多梦做着、做着，就断了;许多泪流着、流着，就干了。人生，原本就是风尘中的沧海桑田，只是，回眸处，世态炎凉演绎成了苦辣酸甜。<br>　　喜欢那种淡到极致的美，不急不躁，不温不火，款步有声，舒缓有序;一弯浅笑，万千深情，尘烟几许，浅思淡行。于时光深处，静看花开花谢，虽历尽沧桑，仍含笑一腔温暖如初。其实，不是不深情，是曾经情太深;不是不懂爱，是爱过知酒浓。生活的阡陌中，没有人改变得了纵横交错的曾经，只是，在渐行渐远的回望里，那些痛过的、哭过的，都演绎成了坚强;那些不忍遗忘的、念念不忘的，都风干成了风景。<br>　　站在岁月之巅放牧心灵，山一程，水一程，红尘、沧桑、流年、清欢，一个人的夜晚，我们终于学会了：于一怀淡泊中，笑望两个人的白月光。<br>　　盈一抹领悟，收藏点点滴滴的快乐，经年流转，透过指尖的温度，期许岁月静好，这一路走来，你会发现，生活于我们，温暖，一直是一种牵引，不是吗?于生活的海洋中踏浪，云帆尽头，轻回眸，处处是别有洞天，云淡风轻。<br>　　有一种经年叫历尽沧桑，有一种远眺叫含泪微笑，有一种追求叫浅行静思，有一种美丽叫淡到极致。给生命一个微笑的理由吧，别让自己的心承载太多的负重;给自己一个取暖的方式吧，以风的执念求索，以莲的姿态恬淡，盈一抹微笑，将岁月打磨成人生枝头最美的风景。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/11/18/站在岁月之巅放牧心灵/" data-id="cj46tfgyx002eo3s6n3xk4p28" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/生命/">生命</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-仓央嘉措情诗" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/11/16/仓央嘉措情诗/" class="article-date">
  <time datetime="2016-11-16T08:49:50.000Z" itemprop="datePublished">2016-11-16</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/文字/">文字</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/11/16/仓央嘉措情诗/">仓央嘉措情诗</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="见与不见"><a href="#见与不见" class="headerlink" title="见与不见"></a>见与不见</h4><blockquote>
<p>你见，或者不见我<br>　　我就在那里<br>　　不悲不喜<br>　　你念，或者不念我<br>　　情就在那里<br>　　不来不去<br>　　你爱，或者不爱我<br>　　爱就在那里<br>　　不增不减<br>　　你跟，或者不跟我<br>　　我的手就在你手里<br>　　不舍不弃<br>　　来我的怀里<br>　　或者<br>　　让我住进你的心里<br>　　默然 相爱<br>寂静 欢喜</p>
</blockquote>
<p><a href="http://mp.weixin.qq.com/s/GitmRu5EjE5aUuFcL9e9bA" target="_blank" rel="external">原文链接请戳</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/11/16/仓央嘉措情诗/" data-id="cj46tfgys0022o3s6f699do57" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/仓央嘉措/">仓央嘉措</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/执子之手，共你一世风霜/">执子之手，共你一世风霜</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/见或不见/">见或不见</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    <a class="extend prev" rel="prev" href="/page/5/">&laquo; __('prev')</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><span class="page-number current">6</span><a class="page-number" href="/page/7/">7</a><a class="extend next" rel="next" href="/page/7/">__('next') &raquo;</a>
  </nav>
</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/iOS/">iOS</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/ios/">ios</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/图片/">图片</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/小说/">小说</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/工具/">工具</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/效率/">效率</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/文字/">文字</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/网络/">网络</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/网络/iOS/">iOS</a></li></ul></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Authentication/">Authentication</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CGRect/">CGRect</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NSURLRequest/">NSURLRequest</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Objective-C/">Objective-C</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TouchID/">TouchID</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iOS/">iOS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ios/">ios</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/下载插件/">下载插件</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/不甘示弱/">不甘示弱</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/仓央嘉措/">仓央嘉措</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/偈子/">偈子</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/南工/">南工</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/历史/">历史</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/屏蔽广告/">屏蔽广告</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/工具/">工具</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/悔恨/">悔恨</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/我的母校/">我的母校</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/执子之手，共你一世风霜/">执子之手，共你一世风霜</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/文史/">文史</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/文字/">文字</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/文学/">文学</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/梦溪湖/">梦溪湖</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/湘西王/">湘西王</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/生命/">生命</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/网页歌曲/">网页歌曲</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/网页视频/">网页视频</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/表单上传/">表单上传</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/西原/">西原</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/见或不见/">见或不见</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/认真的雪/">认真的雪</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/陈渠珍/">陈渠珍</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Authentication/" style="font-size: 10px;">Authentication</a> <a href="/tags/CGRect/" style="font-size: 10px;">CGRect</a> <a href="/tags/NSURLRequest/" style="font-size: 10px;">NSURLRequest</a> <a href="/tags/Objective-C/" style="font-size: 13.33px;">Objective-C</a> <a href="/tags/TouchID/" style="font-size: 10px;">TouchID</a> <a href="/tags/git/" style="font-size: 10px;">git</a> <a href="/tags/iOS/" style="font-size: 20px;">iOS</a> <a href="/tags/ios/" style="font-size: 10px;">ios</a> <a href="/tags/下载插件/" style="font-size: 10px;">下载插件</a> <a href="/tags/不甘示弱/" style="font-size: 10px;">不甘示弱</a> <a href="/tags/仓央嘉措/" style="font-size: 10px;">仓央嘉措</a> <a href="/tags/偈子/" style="font-size: 10px;">偈子</a> <a href="/tags/南工/" style="font-size: 10px;">南工</a> <a href="/tags/历史/" style="font-size: 10px;">历史</a> <a href="/tags/屏蔽广告/" style="font-size: 10px;">屏蔽广告</a> <a href="/tags/工具/" style="font-size: 16.67px;">工具</a> <a href="/tags/悔恨/" style="font-size: 10px;">悔恨</a> <a href="/tags/我的母校/" style="font-size: 10px;">我的母校</a> <a href="/tags/执子之手，共你一世风霜/" style="font-size: 10px;">执子之手，共你一世风霜</a> <a href="/tags/文史/" style="font-size: 10px;">文史</a> <a href="/tags/文字/" style="font-size: 16.67px;">文字</a> <a href="/tags/文学/" style="font-size: 10px;">文学</a> <a href="/tags/梦溪湖/" style="font-size: 10px;">梦溪湖</a> <a href="/tags/湘西王/" style="font-size: 10px;">湘西王</a> <a href="/tags/生命/" style="font-size: 10px;">生命</a> <a href="/tags/网页歌曲/" style="font-size: 10px;">网页歌曲</a> <a href="/tags/网页视频/" style="font-size: 10px;">网页视频</a> <a href="/tags/表单上传/" style="font-size: 10px;">表单上传</a> <a href="/tags/西原/" style="font-size: 10px;">西原</a> <a href="/tags/见或不见/" style="font-size: 10px;">见或不见</a> <a href="/tags/认真的雪/" style="font-size: 10px;">认真的雪</a> <a href="/tags/陈渠珍/" style="font-size: 10px;">陈渠珍</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">January 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">December 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">November 2016</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/04/25/iOS推送机制/">iOS推送机制</a>
          </li>
        
          <li>
            <a href="/2017/03/21/ios应用程序的生命周期/"> ios应用程序的生命周期</a>
          </li>
        
          <li>
            <a href="/2017/03/20/OC内存管理/">OC内存管理</a>
          </li>
        
          <li>
            <a href="/2017/03/19/3·15晚会/">3·15晚会</a>
          </li>
        
          <li>
            <a href="/2017/03/17/NSString属性什么时候用copy，什么时候用strong/">NSString属性什么时候用copy，什么时候用strong?</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 柴亚航<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>